#:kivy 1.8.0

MainGame:

<MainGame>:
	
	gameworld: gameworld
	GameWorld:
		id: gameworld
		gamescreenmanager: gamescreenmanager
				
		Image:
			source: 'assets/background.png'
			size: 1000, 600
			pos: self.pos
		
		PositionSystem:
			system_id: 'position'
			gameworld: gameworld
								
		RotateSystem:
			system_id: 'rotate'
			gameworld: gameworld
		GameView:
			system_id: 'gameview'
			focus_entity: False
			updateable: False
			gameworld: gameworld
			pos: root.pos
			do_scroll: False
			size: root.size
		GameMap:
			system_id: 'map'
			map_size: root.size
			gameworld: gameworld
		Renderer:
			gameworld: gameworld
			system_id: 'renderer'
			shader_source: 'assets/glsl/positionshader.glsl'
			gameview: 'gameview'
		Renderer:
			gameworld: gameworld
			system_id: 'physics_renderer'
			do_rotate: True
			shader_source: 'assets/glsl/positionrotateshader.glsl'
			gameview: 'gameview'
		CymunkPhysics:
			gameworld: gameworld
			system_id: 'physics'
		SteeringSystem:
			physics_system: 'physics'
			system_id: 'steering'
			gameworld: gameworld
	GameScreenManager:
		id: gamescreenmanager
		size: root.size
		pos: root.pos
		gameworld: gameworld
		


<GameScreenManager>:
	MenuScreen:
		id: menu_screen
	MainScreen:
		id: main_screen
	PauseScreen:
		id:pause_screen

<MenuScreen@GameScreen>:
	name: 'menu'
	BoxLayout:
		canvas:
			Color:
				rgba: .4, .4, 1, 1
			Ellipse:
				size: .5, .5
				pos: 200, 300

<MainScreen@GameScreen>:
	name: 'main'
	FloatLayout:
		canvas:
			Color:
				rgba: .4, .4, 1, 1
			#Rectangle:
				#size: self.size
				#pos: self.pos
		Label:
			text: 'Pause Here'
			size_hint: .1, .1
			pos_hint: {'x': .02, 'y': .02}

<PauseScreen@GameScreen>:
	name: 'pause'
	FloatLayout:
		canvas:
			Color:
				rgba: .7, .7, .5, 1
			#Rectangle:
				#size: self.size
				#pos: self.pos
		Label:
			text: "Paused"
			font_size: 24
			pos_hint: {'x': .45, 'y': .45}
		Label:
			text: 'Unpause'
			size_hint: .1, .1
			pos_hint: {'x': .02, 'y': .02}
